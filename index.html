<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Generador de Sudokus Imprimibles</title>

  <!-- Temas Bootswatch locales -->
  <link id="theme-light" rel="stylesheet" href="css/bootswatch-flatly.min.css">
  <link id="theme-dark"  rel="stylesheet" href="css/bootswatch-darkly.min.css" disabled>

  <!-- Estilos propios -->
  <link rel="stylesheet" href="css/styles.css">
  <!-- Estilos del botÃ³n de tema -->
  <link rel="stylesheet" href="css/theme-toggle.css">
  <link rel="stylesheet" href="css/print.css" media="print">

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0d6efd">

  <!-- Seguridad: Content Security Policy (todo local/offline) -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; img-src 'self' data:;
                 style-src 'self' 'unsafe-inline';
                 font-src 'self' data:;
                 script-src 'self';
                 worker-src 'self';
                 object-src 'none';
                 base-uri 'self';
                 frame-ancestors 'none';
                 upgrade-insecure-requests">
</head>
<body>

  <noscript>
    <div style="background:#ffebee;color:#b71c1c;padding:12px;text-align:center">
      NecesitÃ¡s habilitar JavaScript para generar los sudokus.
    </div>
  </noscript>

  <!-- Encabezado con switch de tema -->
  <header class="py-3 border-bottom">
    <div class="container d-flex align-items-center">
      <div class="me-auto">
        <h1 class="fw-bold mb-0">Generador de Sudokus Imprimibles</h1>
        <p class="text-secondary mb-0">Sudokus Ãºnicos con soluciÃ³n â€¢ Listos para imprimir</p>
      </div>

      <!-- BotÃ³n de tema (ICONO). Quitamos clases .btn de Bootstrap para que mande nuestro estilo -->
      <button id="themeToggle"
              class="theme-btn ms-3 fs-4"
              type="button"
              title="Cambiar tema"
              aria-pressed="false"
              aria-label="Cambiar tema: claro u oscuro">
        <span class="icon" aria-hidden="true">ðŸŒ™</span>
      </button>
    </div>
  </header>

  <!-- Contenido principal -->
  <main class="container my-4">

    <!-- Panel de controles -->
    <section class="controls card shadow-sm mb-4">
      <div class="card-body">
        <div class="row g-3 align-items-end">
          <!-- Dificultad -->
          <div class="col-12 col-md-4">
            <label for="difficulty" class="form-label">Dificultad</label>
            <select id="difficulty" class="form-select">
              <option value="easy">FÃ¡cil</option>
              <option value="medium" selected>Media</option>
              <option value="hard">DifÃ­cil</option>
            </select>
          </div>

          <!-- Cantidad -->
          <div class="col-6 col-md-3">
            <label for="count" class="form-label">Cantidad</label>
            <input id="count" type="number" class="form-control" min="1" max="100" step="1" value="1">
          </div>

          <!-- Seed -->
          <details id="advOpts" class="adv">
          <summary>Opciones avanzadas</summary>
          <div class="adv-body">
            <label>Seed (opcional):
              <input id="seed" type="text" placeholder="(opcional)" />
            </label>

            <button id="copyLink" class="btn btn-sm" type="button">Copiar enlace del set</button>
            <span id="copyMsg" class="small text-secondary" aria-live="polite"></span>
          </div>
        </details>

          <!-- Botones -->
          <div class="col-12 d-flex flex-wrap gap-2 pt-2">
            <button id="generateBtn" class="btn btn-primary fw-semibold w-100 w-md-auto" type="button">
              <span class="label">Generar</span>
              <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
            </button>
            <button id="toggleSolutionsBtn" class="btn btn-outline-secondary" type="button">
              Mostrar soluciones
            </button>
            <button id="printBtn" class="btn btn-outline-info" type="button">
              Imprimir
            </button>
            <div class="ms-auto small text-secondary">
              Atajos: <kbd>g</kbd> generar â€¢ <kbd>p</kbd> imprimir â€¢ <kbd>s</kbd> soluciones
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Estado -->
    <section id="status" role="status" aria-live="polite" class="mb-3 small text-secondary"></section>

    <!-- Resultados (pantalla) -->
    <section id="output"></section>
  </main>

  <!-- Pie -->
  <footer class="py-4 border-top">
    <div class="container small text-center text-secondary">
      Proyecto abierto â€¢ Funciona offline â€¢ Â© Tu ONG / Equipo
    </div>
  </footer>

  <!-- Scripts (todo local) -->
  <script src="js/rng.js"></script>
  <script src="js/sudoku-core.js"></script>
  <script src="js/sudoku-ui.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/sw-register.js"></script>

</body>
</html>
